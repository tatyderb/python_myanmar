# функции для математиков

lesson = 1142086

## Существующие функции

### Содержание

1. Что такое функция
2. Встроенные функции
3. Математические функции пакета math
4. import
5. Комплексные числа (дополнительный материал)

### Что такое функция

С точки зрения математики, функция - это черный ящик, который получает на вход **аргументы** и **возвращает значение функции**. То есть преобразование данных.

С точки зрения программирования, как мы уже видели, функции `print()` и `input()` могут иметь **побочный эффект**: выводить информацию на экран, считывать данные с клавиатуры.

*Ничего себе, "побочный эффект", ради этого print с input и делали!*

Итого, у функции есть:

* имя функции - это идентификатор, правила составления идентификаторов мы уже знаем.
* аргументы в `()`
* возвращаемое значение; его можно или присвоить переменной, или игнорировать, как в использовании `print()`.

### Встроенные функции

В python есть функции, которые нужны всем. Это **встроенные функции** (**build-in functions**).

[Список встроенных функций](https://docs.python.org/3/library/functions.html) содержит `print()` и `input()`, `int()`, `float()`, `str()`.

Встроенная функция **abs()** больше похожа на определение функции из математики. У нее один аргумент (число), она возвращает одно значение - **модуль** числа. Модуль числа х (математики пишут $|x|$) определяю так:

$$
    |x|=
    \begin{cases}
      -x, & \text{при}\ x < 0 \\\\ 
      x, & \text{при}\ x \ge 0
    \end{cases}
$$

Встроенная функция **pow()** (возведение в степень) имеет два аргумента - основание и степень. Работает `pow(a, n)` эквивалентно `a ** n`.

```python
x = -5.3
print(abs(x))       # 5.3
print(abs(100))     # 100

res = pow(2, 3)     # res = 8
print(pow(9, 0.5))  # 3.0
```

Использование функции `pow(9, 0.5)` называют **вызовом** функции (**call**) с аргументами 9 и 0.5.

## Математические функции

К сожалению математиков, функций синуса, косинуса, логарифмов и даже квадратного корня в наборе встроенных функций нет. Где их найти?

Есть стандартная библиотека (пакет, модуль)  питона [math](https://docs.python.org/3/library/math.html) с нужными математическими функциями.

Как вызвать функцию из пакета math? Имя любого объекта в python бывает полное в формате `имя_пакета.имя_объекта`, то есть к функции `sin` из пакета `math` нужно обращаться как `math.sin`.

Имя пакета нужно сначала импортировать с помощью **import**. Расскажем об этом на следующем шаге.

Если в описании функций вам не знакомы какие-то термины, то не беспокойтесь, мы их скоро выучим.

### Тригонометрические функции

Обратите внимание, что аргументы задаются в радианах. Если у вас градусы, нужно переводить из градусов в радианы.

| Синтаксис | Описание |
|---|---|
| math.degrees\(r\) |  Преобразует число r, типа float, **из радиан в градусы** |
| math.radians\(d\) |  Преобразует число d, типа float, **из градусов в радианы** |
| math.acos\(x\) |  Возвращает арккосинус x в радианах |
| math.acosh\(x\) |  Возвращает гиперболический арккосинус x в радианах |
| math.asin\(x\) |  Возвращает арксинус x в радианах |
| math.asinh\(x\) |  Возвращает гиперболический арксинус x в радианах |
| math.atan\(x\) |  Возвращает арктангенс x в радианах |
| math.atan2\(y, x\) |  Возвращает арктангенс y/x в радианах |
| math.atanh\(x\) |  Возвращает гиперболический арктангенс x в радианах |
| math.cos\(x\) |  Возвращает косинус x в радианах |
| math.cosh\(x\) |  Возвращает гиперболический косинус x в радианах |
| math.sin\(x\) |  Возвращает синус x в радианах |
| math.sinh\(x\) |  Возвращает гиперболический синус x в радианах |
| math.sqrt\(x\) |  Возвращает  $\sqrt{x}$ |
| math.tan\(x\) |  Возвращает тангенс x в радианах |
| math.tanh\(x\) |  Возвращает гиперболический тангенс x в радианах |

### Логарифмические функции

| Синтаксис | Описание |
|---|---|
| math.exp\(x\) |  Возвращает e в степени x, то есть `math.e ** x` |
| math.frexp\(x\) |  Возвращает кортеж из двух элементов с мантиссой \(в виде числа типа float\) и экспонентой \(в виде числа типа int\) |
| math.ldexp\(m, e\) |  Возвращает $m \cdot 2^x$  – операция, обратная math.frexp  |
| math.log\(x, b\) |  Возвращает $\log_{b} {x}$, аргумент b является необязательным и по умолчанию имеет значение math.e |
| math.log10\(x\) |  Возвращает $\log_{10} {x}$ |
| math.log1p\(x\) |  Возвращает $\log_{e} (1+x)$; дает точные значения, даже когда значение x близко к 0 |


### Округление чисел

| Синтаксис | Описание |
|---|---|
| math.ceil\(x\) |  Возвращает наименьшее целое число типа int, большее и равное x, например, `math.ceil(5.4)  == 6` |
| math.floor\(x\) |  Возвращает наименьшее целое число типа int, меньшее и равное x, например, `math.floor(5.4)  == 5` |

### Прочие функции

| Синтаксис | Описание |
|---|---|
| math.copysign\(x,y\) |  Возвращает x со знаком числа y |
| math.fabs\(x\) |  Возвращает \|x\|, то есть абсолютное значение x в виде числа типа float |
| math.factorial\(x\) |  Возвращает x! |
| math.fmod\(x, y\) |  Выполняет деление по модулю \(возвращает остаток\)  числа x на число y; дает более точный результат, чем оператор %, применительно к числам типа float |
| math.fsum\(i\) |  Возвращает сумму значений в итерируемом объекте i в виде числа типа float |
| math.hypot\(x, y\) |  Возвращает  расстояние от точки (0,0) до точки (x,y) $$\sqrt{x^2 + y^2}$$ |
| math.isinf\(x\) |  Возвращает True, если значение x типа float является бесконечностью $±\infty$ |
| math.isnan\(x\) |  Возвращает True, если значение x типа float не является числом |
| math.modf\(x\) |  Возвращает дробную и целую часть числа x в виде двух значений типа float |
| math.pow\(x, y\) |  Возвращает $x^y$ в виде числа типа float |
| math.sum\(i\) |  Возвращает сумму значений в итерируемом объекте i в виде числа типа float |
| math.trunc\(x\) |  Возвращает целую часть числа x в виде значения типа int; то же самое, что и int\(x\) |

### Константы

| Синтаксис | Описание |
|---|---|
| math.e | Константа e, примерно равная значению 2.7182818284590451 |
| math.pi | Константа $\pi$, примерно равна 3.1415926535897931 |

## import

**import пишут обычно в начале файла**, чтобы все видели, что будет в нем использоваться, а не искали по всему коду.

Как разрешить в программе использовать функцию `sin` из пакета `math`?

### Вариант 1. Полное имя

```python
import math                 # импортируем имя пакета

a = math.sin(math.pi / 2)   # sin(π/2)
```
Заметьте, к константе `pi` из этого же пакета мы обращаемся точно по такому же правилу: `имя_пакета.имя_объекта`

### Вариант 2. Перечисление импортируемых объектов

```python
from math import sin, pi    # импорт объектов sin и pi из пакета math

a = sin(pi / 2)             # обращение к импортируемым объектам по их краткому идентификатору
```

### Вариант 3. Импорт всех объектов пакета

**Никогда так не делайте**. Ниже расскажем почему.

```python
from math import *          # импорт ВСЕХ объектов из пакета math

a = sin(pi / 2)             # обращение к импортируемым объектам по их краткому идентификатору
```

### Вариант 4. import для ленивых (псевдонимы)

Есть еще одна форма import для тех, кому лень писать (а его читателям лень читать) длинные имена пакетов. В отдельном курсе работы с математическими пакетами мы будем часто встречать импорты вида

`import длинное_имя as псевдоним`

Например (мы пока тут ничего не поймем, но это работающий код, который нарисует нам график функции $x^2$ для $1 \le x \le 4$):
```python
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(1, 4, 100)
plt.plot(x, x*x)
```
Если `numpy` на `np` заменили лентяи-математики, то читать `plt.plot` вместо `matplotlib.pyplot.plot` гораздо удобнее всем.

Короткие имена пакетов сокращать не принято. Например, `math` не сокращают. Он и так короткий. Его сокращения будут непонятными.

### Почему не стоит писать `from пакет import *`

Python знаменит тем, что для каждой задачи у него есть множество удобных пакетов. Например, математики используют не только пакет `math`, но и `numpy` (numerical python, питон для вычислений), который дает удобные функции для работы с векторами. В обоих пакетах есть функция `sin`.

```python
from math import *
from numpy import *

a = sin(pi/2)
```
Вопрос: какая функция была вызвана - `math.sin` или `numpy.sin`? Зависит ли это от порядка импорта пакетов? Изменится ли результат, если мы поменяем две верхние строки местами?

Не нужно писать код, который заставляет задумываться. Будьте проще. Вы не головоломки создаете, а программы пишете.

Исключение: импортируется единственный пакет (крайне редкий случай, обычно секция импортов в начале файла занимает много строк).

## QUIZ Ключевое слово

Чем нужно заменить `???` в коде

```python
??? math
print(math.sqrt(2))
```

A. `import`
B. `insert`
C. `include`
D. `use`
E. `namespace`

ANSWER: A

## QUIZ

Отметьте синтаксически правильный код.

A. <pre>import math<br/>x = math.sqrt(2)</pre>
B. <pre>import math as m<br/>x = m.sqrt(2)</pre>
C. <pre>import math<br/>x = sqrt(2)</pre>
D. <pre>from math import sqrt<br/>x = sqrt(2)</pre>
E. <pre>from math import sqrt()<br/>x = sqrt(2)</pre>

ANSWER: A, B, D

## TASKINLINE Гипотенуза

Даны длины двух катетов $a$ и $b$ прямоугольного треугольника. Используя функцию `math.sqrt`, найдите длину гипотенузы по формуле $$\sqrt{a^2 + b^2}$$

CONFIG
checker:std_float_seq
score: 5
TEST
10.5
3.7
----
11.132834320154055
====
3
4
----
5
====
1
1
----
1.4142135623730951
====

## TASKINLINE тригонометрические функции

Дано значение `x` в радианах. Вычислите значение выражения $$sin(x) + cos(3x)$$

Не забудьте про `import`.

CONFIG
checker:std_float_seq
score: 5
TEST
3.14
----
-0.9983959326506713
====
1.57
----
0.997610704819553
====
0
----
1
====
1.5
----
0.7866991871732747
====

## TASKINLINE градусы

Дано значение `x` в **градусах**. Вычислите значение выражения $$sin(x) + cos(3x)$$

Не забудьте про `import`.

CONFIG
checker:std_float_seq
score: 5
TEST
180
----
-1
====
90
----
1
====
0
----
1
====
37.6
----
0.22262957744916462
====

## Округление

Числа типа `int` и `float` могут быть аргументами следующих функций :

| Операция | Результат |
| --- | --- |
| int\(x\) | Округляет число в сторону нуля. Это стандартная функция, для ее использования не нужно подключать модуль math |
| round\(x\) | Округляет число до ближайшего целого. Если дробная часть числа равна 0.5, то число округляется до ближайшего четного числа |
| round\(x, n\) | Округляет число x до n знаков после точки. Это стандартная функция, для ее использования не нужно подключать модуль math |
| math.floor\(x\) | Округляет число вниз \(«пол»\), при этом floor\(1.5\) = 1, floor\(-1.5\) = -2 |
| math.ceil\(x\) | Округляет число вверх \(«потолок»\), при этом ceil\(1.5\) = 2, ceil\(-1.5\) = -1 |
| math.trunc\(x\) | Отбрасывает дробную часть |
| float.is_integer\(\) | True, если дробная часть 0. |
| float.as_integer_ratio\(\) | Возвращает числитель и знаменатель дроби |

Примеры:

| Выражение | Результат |
|---|---|
| int(1.7) | 1 |
| int(-1.7) | -1 |
| ceil(4.2) | 5 |
| ceil(4.8) | 5 |
| ceil(-4.2) | -4 |
| round(1.3) | 1 |
| round(1.7) | 2 |
| round(1.5) | 2 |
| round(2.5) | 2 |
| round(2.65, 1) | 2.6 |
| round(2.75, 1) | 2.8 |
| trunc(5.32) | 5 |
| trunc(-5.32) | -5 |

```python
>>> x = 3.0
>>> x.is_integer()
True
>>> x = 2.75
>>> a, b = x.as_integer_ratio()  # помним, что функция может возвращать несколько значений
>>> a                            # числитель
11
>>> b                            # знаменатель
4
```

Сюрпризы:

```python
round(2.85, 1)   # 2.9
```
подробнее:
[Floating Point Arithmetic: Issues and Limitations](https://docs.python.org/3/tutorial/floatingpoint.html#tut-fp-issues)

## TASKINLINE round

Дано вещественное число. Дано количество знаков после точки.

Напечатайте это число с указанным количеством знаков после точки, используя встроенную функцию **round**.

CONFIG
score: 2
TEST
3.1415
3
----
3.142
====
3.1415
2
----
3.14
====
7.1352674
5
----
7.13527
====
-7.1352674
5
----
-7.13527
====

## Комплексные числа

*Если вы не знаете, что такое комплексные числа и они не нужны в вашей работе, пропустите этот шаг.*

В python есть комплексные числа. Для работы с ними используют пакет [cmath](https://docs.python.org/3/library/cmath.html).

Вместо $i$ при определении комплексного числа пишут `j`

```python
x = 2 + 3j  # никаких знаков умножения
```
Работать с комплексными числами можно так же, как с обычными числами. Пример работы в консоли:
```python
>>> x = 2 + 3j
>>> x
(2+3j)
>>> y = -1.2 - 4.5j
>>> x + y
(0.8-1.5j)
```