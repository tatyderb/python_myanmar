# Именованные аргументы и значения по умолчанию

lesson = 1159166

## Именованные аргументы

### Содержание

1. Именованные аргументы
2. Значение по умолчанию

### Как избежать ошибок при передаче аргументов в функцию

При вычислении расстояния между двумя точками `dist(1, 2, 3, 4)` глядя на вызов функции думаешь, где тут координаты первой и координаты второй точки? Какая сигнатура у функции `dist`? `dist(x1, y1, x2, y2)` или `dist(x1, x2, y1, y2)`?

Многие из вас при вычислении площади треугольника ошибались в вызове аргументов. 

Когда ищешь ошибку, тратишь время на выяснение уж не перепутан ли порядок аргументов при вызове функции. Читаемость кода `dist(1, 2, 3, 4)` не очень хорошая.

Чтобы улучшить читаемость в python разрешили передавать **именованные аргументы** (keyword arguments) в противовес **позиционным аргументам** (positional arguments). Что это такое?

Позиционный аргумент - позиция аргумента в списке аргументов определяет, какому параметру он будет присвоен.

В вызове `dist(1, 2, 3, 4)` для функции `dist(x1, y1, x2, y2)` позиция чисел 1, 2, 3, 4 определяет, что `x1 = 1`, `y1 = 2`, `x2 = 3`, `y2 = 4`.

Именованный аргумент - при вызове явно указывается, какому параметру будет принадлежит аргумент. *Действительность чуть сложнее, об этом поговорим при изучении коллекций и разборе `*args` и `**kwargs`* 

```python
dist(x1=1, y1=2, x2=3, y2=4)    # все аргументы именованные
```

* Повысилась читаемость, сразу видно, чему какое значение будет присвоено.
* Порядок перечисления именных аргументов может быть любой. Главное - они должны быть строго **после позиционных аргументов**.

Корректные вызовы функции `dist`:
```python
d = dist(3, 5, 4, -4)
d = dist(x1=3, x2=4, y1=5, y2=-4)
d = dist(x1=3, y1=5, x2=4, y2=-4)
```
Мне все равно, как определяли порядок аргументов в `dist`, я помню, что там параметры `x1`, `x2`, `y1`, `y2`. В каком порядке хочу, в таком и пишу именованные аргументы!

Ошибка:
```python
d = dist(x1=3, 4, x2=3, y2=-4)  # ОШИБКА! сначала аргумент по имени, потом - нет.
```

### Значение по умолчанию

Параметрам функции можно присвоить значение по умолчанию. Если параметру не будет передан аргумент, ему будет присвоено значение по умолчанию.

Напишем функцию, которая считает время окончания урока номер `n` в школе. По умолчанию считаем длительность урока 40 минут, перемены 10 минут, а начало первого урока в 8:00.

```python
def min2time(mm):
    h = mm // 60 % 24
    m = mm % 60
    return h, m             # возвращает 2 числа, пишем через запятую

def time2min(h, m):
    return h * 60 + m

def lesson_end(n, lesson_duration=40, break_duration=10, h0=8, m0=0):
    start = time2min(h0, m0)
    end = start + n * lesson_duration + (n - 1)*break_duration
    h, m = min2time(end)
    return h, m
    
h1, m1 = lesson_end(1)
print(f'Первый урок закончится в {h1:02}:{m1:02}')
# В субботу уроки начнутся в 9:00 и перемены будут сокращены до 5 минут, будет 4 урока
h2, m2 = lesson_end(n=4, break_duration=5, h0=9)
print(f'В субботу уроки закончатся в {h2:02}:{m2:02}')
``` 
В сочетании с именованными аргументами, значения по умолчанию сильно повышают читаемость кода. Видим, что в субботу изменилось только длительность перемен и начало первого урока. Остальное - так же, как в другие дни.

**Если начались параметры со значением по умолчанию, после них нельзя поставить параметр без такого значения.** Как в именованных аргументах, сначала позиционные, потом именованные. Тут тоже сначала без значения по умолчанию, потом остальные со значениями по умолчанию.

Ошибка, параметр `n` без значения по умолчанию, идет после параметров `lesson_duration`  и `break_duration` со значениями по умолчанию:
```python
def lesson_end(lesson_duration=40, break_duration=10, n, h0=8, m0=0):  # Ошибка
    код функции
```

### Пример использования значения по умолчанию

Нужно считать расстояние между двумя точками и расстояние от точки до центра координат (0,0).

Есть функция `dist(x1, y1, x2, y2)`, которая считает расстояние между точками `(x1, y1)` и `(x2, y2)`.

Хотим функцию `dist0(x,y)`, которая считает расстояние от точки `(x,y)` до `(0,0)`.

#### Плохое решение (повторение кода)

```python
def dist(x1, y1, x2, y2):
    a = x1 - x2
    b = y1 - y2
    res = sqrt(a*a + b*b)
    return res
    
def dist0(x, y):
    res = sqrt(x*x + y*y)
    return res
```
Почему плохо, если работает?

* Допустим, когда писали ошиблись в одной функции из двух. В большой задаче часть расстояний считается правильно, часть - с ошибкой. Трудно искать где ошибка. Быстрее найти ошибку, если все расстояния - с одной и той же ошибкой.

* Хочу печатать точки и расстояния (отладочная печать). Нужно править - писать 2 раза `print` в 2 функциях. Много работы.

#### Функция-обертка

Лучше написать `dist0` так, чтобы она использовала код функции `dist`.

```python
def dist(x1, y1, x2, y2):
    a = x1 - x2
    b = y1 - y2
    res = sqrt(a*a + b*b)
    return res
    
def dist0(x, y):
    return dist(x, y, 0, 0)   # вызываем уже написанную функцию
```

#### Единая функция со значением по умолчанию

* Функция `dist(1, 2, 3, 4)` считает расстояние между точками `(1, 2)` и `(3, 4)`
* Функция `dist(1, 2)` считает расстояние между точками `(1, 2)` и `(0, 0)`

Напишем у x2 и y2 значение по умолчанию 0. **Значение по умолчанию можно сделать любое. Не обязательно 0.**

```python
def dist(x1, y1, x2=0, y2=0):
    a = x1 - x2
    b = y1 - y2
    res = sqrt(a*a + b*b)
    return res
```

Когда вызываем функцию `dist`, можем передавать все параметры, а можем не передавать `x2` и `y2`. Тогда их значение будет по умолчанию 0.

```python
d = dist(3, 4, 3, -4)     # расстояние между точками (3, 4) и (3, -4)
d = dist(3, 4, 3)         # расстояние между точками (3, 4) и (3, 0)
d = dist(3, 4)            # расстояние между точками (3, 4) и (0, 0)
```
Ошибка:
```python
d = dist(x2=3, y2=4)      # не определены значения x1 и y1
```

## QUIZ

Есть функция с сигнатурой `square(size=100, colour='blue')`. Отметьте синтаксически правильный код.

A. `square(50, 'red')`

B. `square(50)`

C. `square(colour='red', 50)`

D. `square(colour='red', size=100)`

E. `square(colour='red')`

F. `square()`

G. `square(size=200)`

ANSWER: A, B, D, E, F, G

## SKIP Пропуски

Функция с сигнатурой `square(size=100, colour='blue')` рисует квадрат стороной `size` и цветом `colour`. Заполните пропуски, каким цветом и какого размера будет нарисован квадрат.

A. `square(50, 'red')`

B. `square(50)`

F. `square()`

## SKIP Пропуски

Функция с сигнатурой `square(size=100, colour='blue')` рисует квадрат стороной `size` и цветом `colour`. Заполните пропуски, каким цветом и какого размера будет нарисован квадрат.

D. `square(colour='red', size=50)`

E. `square(colour='red')`

G. `square(size=200)`

