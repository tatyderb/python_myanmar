# Цикл while

lesson = 1120987

## Ввод до признака конца данных с использованием `while`

Еще один вариант использования цикла `while` - обработка последовательности данных до стоп-значения.

Цикл `while` работает, пока не наступит какое-то событие, например, **конец последовательности данных**.

### Задача

Надо найти сумму чисел, по одному числу на строку. Заранее неизвестно, сколько чисел. Последней строкой написано слово `end`.

Подумаем, какие операторы нужно повторять, на примере сложения трех чисел:
```python
res = 0

x = input()
x = int(x)
res += x

x = input()
x = int(x)
res += x

x = input()
x = int(x)
res += x

print(res)
```

Видим, что инициацию переменных `res = 0` пишем до цикла (один раз), печать результатов `print(res)` - после цикла (один раз). Внутри цикла повторяем чтение данных и сложение.

Как добавить проверку, что очередная строка - это `end` и закончить цикл?

### Наивный подход `while x != 'end'`

Мы можем просто написать `while x != 'end'`, но тогда у нас будет проблема при чтении первой строки. Во время проверки в цикле `x != 'end'` в `x` уже должна лежать введенная строка. То есть чтение строки нужно сделать **до цикла**. 

Чтобы в цикле обрабатывались разные строки, нужно **в цикле** тоже написать чтение строки - подготовку к следующей итерации цикла.

```python
# до цикла
res = 0
x = input()

while x != 'end':
    x = int(x)
    res += x
    # готовимся к проверке на end
    x = input()

# после цикла печатаем результат
print(res)
```

Работает, но дублируется код чтения строки до цикла. Больше кода - больше возможностей совершить ошибки. Можно ли написать, не дублируя код? Хочется в цикле сначала прочитать строку, потом проверить; если строка равна 'end', то выйти из цикла. Проверка в начале цикла мешает. Уберем её. 

### Бесконечный цикл

Если написать условие *продолжения цикла* так, что оно будет всегда верно, получим **бесконечный цикл**.

```python
while True:
    print('hello')
```

Зачем писать бесконечные циклы? В одной итерации цикла считывать данные до стоп-значения удобнее по алгоритму:

* считать данные
* если стоп-условие, то выйти из цикла
* иначе что-то сделать с данными
* перейти к следующей итерации цикла

Выйти из цикла можно с помощью `return`, если цикл написан в отдельной функции.

```python
def sum_until_end():
    # до цикла инициализируем счетчик
    res = 0
    
    # сам цикл
    while True:
        x = input()     # число или end
        if x == 'end':
            # здесь обработаем end и закончим цикл, выйдя из функции
            return res
        # дальше обрабатываем число (если не вышли из функции и цикла)
        x = int(x)
        res += x
        
# вызываем функцию и печатаем результат
total = sum_until_end()
print(total)
```

### Бесконечный цикл вне функции - оператор `break`

Как написать "выйти из цикла", если код не в функции?

Ключевое слово `break` - выйти из цикла, перейти на следующий оператор после цикла. С ним можно обойтись без функции.

```python
res = 0

# бесконечный цикл
while True:
    x = input()
    if x == 'end':
        print('вышли из цикла')
        break
    # тут может быть только число
    x = int(x)
    res += x
    print(f'x={x} res={res}')   # отладочная печать поможет нам понять как работает цикл

print('сюда передаст управление break')
print(res)    
```

Очень удобно использовать `while True` и `break` или `return`, если вы не понимаете какое условие продолжения цикла надо писать, как и когда получать новые данные. 

### Флаг "продолжаем цикл"

Можно, как мы [сделаем в игре Space Invaders](https://stepik.org/lesson/784099/step/3), определить переменную. Которая будет `True`, пока нужно продолжать цикл, и станет `False`, когда цикл нужно будет остановить.

```python
# до цикла
res = 0
running = True      # цикл продолжается, пока running==True

while running:
    x = input()
    if x == 'end':
        print('end: running = False')
        running = False
    else:
        x = int(x)
        res += x
        
# после цикла печатаем результат
print(res)    
```

## QUIZ Бесконечность

Как написать бесконечный цикл?

A. `while True:`
B. `while False:`
C. `while:`
D. `while INFINITY:`

ANSWER: A

## QUIZ Забытый `else`

Дано:

```python
12
5
-3
end
```
Что будет в результате выполнения кода?

```python
# до цикла
res = 0
running = True      # цикл продолжается, пока running==True

while running:
    x = input()
    if x == 'end':
        running = False
    x = int(x)
    res += x
        
# после цикла печатаем результат
print(res)    
```

A. 14
B. 17
C. ошибка выполнения, потому что делаем `int('end')` 

ANSWER: C

## TASKINLINE Сумма чисел до 0

Даны числа, по 1 числу на строку.

Найти сумму чисел последовательности. **Концом последовательности считать число 0** (после 0 числа не складываем).

Суммируем 3+(-7)+16 = 12, 0 - конец последовательности, 999 - после конца, игнорируем.

TEST
3
-7
16
0
999
----
12
====
1
1
1
1
0
----
4
====
0
----
0
====
-5
-11
-62
0
-12
-345
-67
----
-78
====
9
0
23
45
67
890
----
9
====

## TASKINLINE Не отрицательные числа

Даны числа, по 1 числу на строку.

Найти сумму чисел последовательности. **Концом последовательности считать отрицательное число** (его не складываем, дальше не складываем).

TEST
3
7
16
-10
999
----
26
====
1
1
-1
10
-2
----
2
====
-3
----
0
====
5
0
15
-67
----
20
====
9
-9
----
9
====

## TASKINLINE Четные до первого отрицательного

Дана последовательность. Концом последовательности считать отрицательное число. Найти сумму четных чисел последовательности.

TEST
3
7
16
-10
999
----
16
====
4
4
-1
10
-2
----
8
====
-3
----
0
====
12
0
16
-67
----
28
====
100
-9
----
100
====
1
3
5
-2
----
0
====

## TASKINLINE Две секции

Даны числа по 1 числу на строку. Первая последовательность заканчивается строкой `++++`, вторая последовательность заканчивается строкой `****`. Напечатать разность сумм первой и второй последовательности.

Пример: 

* S1 = 5 + 19 = 24
* S2 = 7 + -1 + 10 + -2 = 14
* S1 - S2 = 24 - 14 = 10 

TEST
5
19
++++
7
-1
10
-2
****
----
10
====
3
++++
19
****
----
-16
====
1
2
3
4
5
6
7
8
9
++++
10
11
****
----
24
====


## TASKINLINE Клад Флинта

Капитан Флинт зарыл клад на Острове сокровищ. Он оставил описание, как найти клад. 

![Пиратская карта](https://stepik.org/media/attachments/lesson/443937/pirate_map.jpg)
<a href="http://www.freepik.com">Designed by Freepik</a>

Описание состоит из строк вида: "куда 5", 

* куда – одно из: 
    * north (север), 
    * south (юг), 
    * east (восток), 
    * west (запад), 
* второе число – сколько шагов идем в направлении *куда*

В конце пути есть клад 'Treasure!`

Путь 5 шагов на север, 3 шага на восток, 1 шаг на юг это

```
north 5
east 3
south 1
Treasure!
```
Начинаем путь в точке (0, 0). По осям Х и Y считаем шаги.

Ось OX направлена на восток, ось OY – на север.

![Путь к кладу](https://stepik.org/media/attachments/lesson/443937/flint_coords.png)

Программа получает на вход последовательность строк указанного вида, завершающуюся строкой со словом "Treasure!". Программа должна вывести два целых числа: координаты клада.

TEST
north 6
east 6
south 4
east 1
Treasure!
----
7 2
====
north 5
east 3
south 1
Treasure!
----
3 4
====
Treasure!
----
0 0
====
west 5
south 3
Treasure!
----
-5 -3
====
west 5
south 3
east 1
south 4
Treasure!
----
-4 -7
====
