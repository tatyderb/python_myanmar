# Атрибуты и методы объекта

lesson = 1108157


## Атрибуты объекта и методы

```python
class Segment1:
    """ Одномерный отрезок. """
    pass
```

Создадим объект `a` класса `Segment1` (то есть отрезок).

```python
a = Segment1()  # переменная a ссылается на объект класса Segment1
```
У отрезка должно быть начало и конец. Назовем их `start` и `finish` (мы придумали такие названия). Это атрибуты данного объекта. Зададим их так, чтобы мы описывали отрезок от 2 до 10.
```python
a.start = 2
a.finish = 10
```
Можно напечатать значение атрибутов объекта:
```python
print(a.start, a.finish)    # 2 10
print(f'Отрезок a от {a.start} до {a.finish}')
```
Создадим еще один объект того же класса `Segment1` и запишем ссылку на него в переменную `b`. Зададим у него атрибуты `start` и `finish` так, чтобы они описывали отрезок от -5 до 1. Напечатаем эти значения.

```python
b = Segment1()  # переменная b ссылается на объект класса Segment1
b.start = -5
b.finish = 1

print(f'Отрезок b от {b.start} до {b.finish}')
```

Атрибуты - это переменные. Они тоже ссылаются на данные (числа -5 и 1). Их значения можно менять.

```python
b.finish = 6    # теперь это отрезок от -5 до 6
b.start += 1    # теперь это отрезок от -4 до 6
``` 

Схематично нарисуем переменные, объекты и их атрибуты на **диаграмме объектов**.

**Рисунок a ссылается на объект с атрибутами, атрибуты ссылаются на числа, аналогично b** , диаграмма объектов, как на стр. 142

Полный код программы:
```python
class Segment1:
    """ Одномерный отрезок. """
    pass
# тут объявление класса закончено, можно его использовать

# использование класса:    
a = Segment1()  # переменная a ссылается на созданный объект класса Segment1
a.start = 2
a.finish = 10

print(a.start, a.finish)    # 2 10
print(f'Отрезок a от {a.start} до {a.finish}')      # Отрезок a от 2 до 10

b = Segment1()  # переменная b ссылается на объект класса Segment1
b.start = -5
b.finish = 1

print(f'Отрезок b от {b.start} до {b.finish}')      # Отрезок b от -5 до 1

b.finish = 6    # теперь это отрезок от -5 до 6
b.start += 1    # теперь это отрезок от -4 до 6

print(f'Отрезок b от {b.start} до {b.finish}')      # Отрезок b от -4 до 6
```

## Методы

Чтобы действия с данными не были оторваны от данных, можно добавить в класс функцию.

Напишем обычную функцию (вне класса), которая вычисляет длину отрезка:
```python
def length(seg):
    """ Возвращает длину отрезка seg. """
    d = seg.finish - seg.start
    return d
    
# вызовем эту функцию для объектов, на которые ссылаются переменные a и b
d = length(a)
print(f'Отрезок a от {a.start} до {a.finish} длиной {d}')   # Отрезок a от 2 до 10 длиной 8

d = length(b)
print(f'Отрезок b от {b.start} до {b.finish} длиной {d}')   # Отрезок b от -4 до 6 длиной 10
```

Перенесем эту функцию внутрь класса `Segment1` и вызовем ее по полному имени (имя класса и имя функции в нем). *Предупреждение: данный синтаксис может привести к крикам "так никто не пишет!!!" у знатоков питона. Подождите чуть-чуть и мы перепишем этот фрагмент привычным образом.*

**Функции внутри класса пишут с дополнительным отступом, чтобы интерпретатор понял, что этот код принадлежит классу.**

```python
class Segment1:
    """ Одномерный отрезок. """
    def length(seg):
        """ Возвращает длину отрезка seg. """
        d = seg.finish - seg.start
        return d
# тут объявление класса закончено, можно его использовать

# использование класса:    
a = Segment1()
a.start = 2
a.finish = 10

d = Segment1.length(a)
print(f'Отрезок a от {a.start} до {a.finish} длиной {d}')   # Отрезок a от 2 до 10 длиной 8
```
Этот код работает. Но его можно записать короче, через синтаксис с точкой. `переменная.метод()`

Вместо
```python
d = Segment1.length(a)
```
Напишем
```python
d = a.length()
```
Так как переменная `a` ссылается на объект класса `Segment1`, то вызовется функция `length` этого класса. Чтобы не писать дважды одну и ту же ссылку, первый аргумент функции (ссылку на ЭТОТ объект) при **вызове** не пишут. Потому что мы написали ее раньше. Вызовется функция именно для этого объекта, на который ссылается `a`. То есть у объекта есть и атрибуты `start` и `finish` и функция `length`.

**Функция, определенная внутри класса, называется методом.** Далее мы будем употреблять то слово "метод", то "функция".

Вы уже работали с методами объектов. 
```python
text = input()          # вызвали функцию input, она создала объект класса str, на объект ссылается переменная text
words = text.split()    # у объекта класса str вызвали метод split
```
При создании игры мы писали `display.blit(player_img, (0, 0))`. В выражении `display` - ссылка на объект одного из классов `pygame`, у этого класса есть метод `blit` с аргументами.

## self

**Первым аргументом метода объекта должна быть ссылка на этот объект.** 

Принято параметр для этой ссылки называть **self** (ссылка на ЭТОТ объект). Мы в методе `length` назвали этот параметр `seg`. Как видите, синтаксически это корректная запись, но **все программисты используют название self**. 

Перепишем наш код:

```python
class Segment1:
    """ Одномерный отрезок. """
    
    def length(self):
        """ Возвращает длину отрезка. """
        return self.finish - self.start
       
a = Segment1()
a.start = 2
a.finish = 10

d = a.length()
print(f'Отрезок a от {a.start} до {a.finish} длиной {d}')   # Отрезок a от 2 до 10 длиной 8
```
Можно вызов метода объекта сделать прямо в форматной строке:
```python
print(f'Отрезок a от {a.start} до {a.finish} длиной {a.length()}')   # Отрезок a от 2 до 10 длиной 8
```

### Вызов другого метода того же объекта

*Предупреждение: функция `info` приведена как пример вызова одного метода из другого. Такую функциональность в классе делают по-другому. О правильной реализации расскажем в следующем уроке.*

Допишем в класс `Segment1` метод, который *печатает* всю информацию об отрезке: координату начала, координату конца и длину отрезка. Назовем этот метод `info`:

```python
class Segment1:
    """ Одномерный отрезок. """
    
    def length(self):
        """ Возвращает длину отрезка. """
        return self.finish - self.start
        
    def info(self):
        """ Печатает информацию об отрезке """
        d = self.length()   # вызвали метод вычисления длины ЭТОГО объекта
        print(f'Отрезок от {self.start} до {self.finish} длиной {d}')
       
a = Segment1()
a.start = 2
a.finish = 10

a.info()        # Отрезок от 2 до 10 длиной 8
```
Внутри вызова метода `a.info()` вызывается метод `length()` для того же объекта `a`.


## QUIZ Параметры методов - 1

Какой параметр должен иметь каждый метод объекта (экземпляра) класса `Point`?

A. `self`
B. `myself`
C. `this`
D. `Point`
E. `point`
F. `__init__`

ANSWER: A

## QUIZ Параметры методов - 2

В методе экземпляра класса параметр `self` :

A. должен быть первым параметром
B. должен быть последним параметром
C. должен быть одним из параметров, в любом месте
D. может быть, а может не быть, это не обязательный параметр

ANSWER: A

## QUIZ место

Отметьте все правильные объявления метода `foo` экземпляров класса `A`, которому передают два целых числа через параметры `n` и `m`.

A. `def foo(self, n, m):`
B. `def foo(n, m, self):`
C. `def foo(n, self, m):`
D. `def foo(n, m):`

ANSWER: A

## QUIZ вызов метода

Выберите все корректные вызовы метода `voice` у объекта класса `Cat`.

```python
class Cat:
    def voice(self):
        print('Мяу')
        
barsik = Cat()
```

A. `barsik.voice()`
B. `Cat.voice(barsik)`
C. `barsik.voice(self)`
D. `barsik.voice(barsik)`
E. `Cat.voice(self)`
F. `voice(barsik)`
G. `voice(Cat)`

ANSWER: A,B

## QUIZ поезд

Выберите все корректные вызовы метода `tutu` у объекта класса `Train`.

```python
class Train:
    def tutu(self, station):
        print(f'Поезд следует до станции {station}')
        
t = Train()
```

A. `t.tutu('Новодачная')`
B. `t.tutu()`
C. `t.tutu(17, 'Новодачная')`
D. `t.tutu(self, 'Новодачная')`

ANSWER: A


